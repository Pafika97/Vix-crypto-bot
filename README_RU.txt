VIX Crypto Bot (BTC & ETH)
==========================

Описание
--------

Эта программа:

1. Подключается к топовым криптовалютным биржам через библиотеку **ccxt**.
2. Собирает почасовые OHLCV-данные по Bitcoin и Ethereum.
3. Строит виртуальный "индекс VIX" — годовую реализованную волатильность,
   которая отражает уровень "вынужденных продаж" (стресса) на рынке.
4. Записывает данные в Excel-файлы и строит графики.
5. Управляется через Telegram-бота — по командам в чате.

Используемый индекс
-------------------

В классике VIX считается по опционам, но для криптовалют и спотовых данных
мы используем приближённый показатель:

1. Для каждой свечи (1 час) считаем объёмно-взвешенную цену закрытия:
   VWAP_close = sum(p_i * v_i) / sum(v_i) по всем биржам.
2. Считаем логарифмические доходности: r_t = ln(P_t / P_{t-1}).
3. Для окна из 24 часов считаем стандартное отклонение доходностей и
   переводим его в годовые значения: sigma = std(r) * sqrt(24 * 365).
4. Умножаем на 100 и получаем индекс в процентах годовой волатильности.

Чем выше индекс, тем больше "нервность" рынка и вероятность вынужденных
продаж (маржин-коллы, ликвидации, панические продажи и т.п.).

Файлы
-----

- `main.py` — основной файл бота и всей логики расчёта.
- `requirements.txt` — список зависимостей Python.
- `config.example.env` — пример настроек окружения (скопируйте в `.env`).
- Папка `output` (создаётся автоматически) — туда сохраняются Excel и PNG.

Установка
---------

1. Установите Python 3.10+ (если ещё не установлен).

2. Создайте и активируйте виртуальное окружение (рекомендуется):

   **Windows (PowerShell):**

   ```powershell
   python -m venv venv
   .\\venv\\Scripts\\Activate.ps1
   ```

   **Linux / macOS:**

   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```

3. Установите зависимости:

   ```bash
   pip install -r requirements.txt
   ```

4. Создайте файл `.env`:

   - Скопируйте `config.example.env` в `.env`
   - Вставьте токен вашего Telegram-бота:

     ```text
     TELEGRAM_BOT_TOKEN=1234567890:ABCDEF...
     ```

   Токен можно получить у @BotFather в Telegram.

Запуск
------

1. Активируйте виртуальное окружение (если ещё не активировано).
2. Запустите бота:

   ```bash
   python main.py
   ```

3. В Telegram найдите вашего бота (по юзернейму) и нажмите **Start**.

Команды
-------

- `/start` — краткая справка и список команд.
- `/vix_btc` — расчёт индекса VIX для Bitcoin:
  - собирает данные с набора бирж,
  - считает индекс,
  - отправляет **Excel-файл** и **график** в чат.
- `/vix_eth` — то же самое, но для Ethereum.
- `/vix_all` — последовательно выполняет `/vix_btc` и `/vix_eth`.

Результаты
----------

При каждом запросе бот:

- Создаёт Excel-файл в папке `output`, где есть:
  - сырые данные по биржам (цены и объёмы),
  - VWAP-цены,
  - временной ряд индекса VIX.
- Создаёт PNG-график временного ряда VIX.
- Присылает оба файла в Telegram-чат.

Примечания
----------

- Список бирж задан в переменной `EXCHANGES` в `main.py`.
  Вы можете отредактировать его по своему усмотрению.
- Если какая-то биржа недоступна или не имеет нужной пары, она просто пропускается.
- Таймфрейм (1 час), глубина истории (LIMIT) и длина окна (ROLLING_WINDOW)
  также задаются в начале `main.py` и при желании могут быть изменены.
